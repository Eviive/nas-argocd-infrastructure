apiVersion: 1
groups:
  - orgId: 1
    name: Rules
    folder: Kube State Metrics
    interval: 1m
    rules:
      - uid: 45cadec5-e024-55a8-97d2-c92ff4a56693
        title: KubernetesNodeNotReady
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_node_status_condition{condition="Ready",status="true"} == 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            Node {{ $labels.node }} has been unready for a long time
          summary: Kubernetes Node ready (node {{ $labels.node }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 13e18994-d9a7-5c43-95d0-41231e84b7df
        title: KubernetesNodeSchedulingDisabled
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_node_spec_taint{key="node.kubernetes.io/unschedulable"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 30m
        annotations:
          description: |-
            Node {{ $labels.node }} has been marked as unschedulable for more than 30 minutes.
          summary: Kubernetes node scheduling disabled (node {{ $labels.node }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 278c6d13-001d-5035-b3a6-1ef250336f64
        title: KubernetesNodeMemoryPressure
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_node_status_condition{condition="MemoryPressure",status="true"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Node {{ $labels.node }} has MemoryPressure condition
          summary: Kubernetes memory pressure (node {{ $labels.node }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: a00c66d6-1966-572b-8993-f260bc5af1f9
        title: KubernetesNodeDiskPressure
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_node_status_condition{condition="DiskPressure",status="true"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Node {{ $labels.node }} has DiskPressure condition
          summary: Kubernetes disk pressure (node {{ $labels.node }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 9a4ef0a5-c27a-5cfd-a816-0aa461a14e1f
        title: KubernetesNodeNetworkUnavailable
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_node_status_condition{condition="NetworkUnavailable",status="true"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Node {{ $labels.node }} has NetworkUnavailable condition
          summary: Kubernetes Node network unavailable (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 5cf3eeb7-4ae8-5306-8ab6-36846cf75ac7
        title: KubernetesNodeOutOfPodCapacity
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: sum by (node) ((kube_pod_status_phase{phase="Running"} == 1) + on(uid, instance) group_left(node) (0 * kube_pod_info{pod_template_hash=""})) / sum by (node) (kube_node_status_allocatable{resource="pods"}) * 100 > 90
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Node {{ $labels.node }} is out of pod capacity
          summary: Kubernetes Node out of pod capacity (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: a574f7e7-d7c0-5f3b-9964-152d9bb6677b
        title: KubernetesContainerOomKiller
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (kube_pod_container_status_restarts_total - kube_pod_container_status_restarts_total offset 10m >= 1) and ignoring (reason) min_over_time(kube_pod_container_status_last_terminated_reason{reason="OOMKilled"}[10m]) == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Container {{ $labels.container }} in pod {{ $labels.namespace }}/{{ $labels.pod }} has been OOMKilled {{ $value }} times in the last 10 minutes.
          summary: Kubernetes container oom killer ({{ $labels.namespace }}/{{ $labels.pod }}:{{ $labels.container }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 170e3a43-bc4d-5d0c-ade7-5c318d6773d3
        title: KubernetesJobFailed
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_job_status_failed > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete
          summary: Kubernetes Job failed ({{ $labels.namespace }}/{{ $labels.job_name }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d9adf00f-61fe-553b-97f3-2b1f3ce00100
        title: KubernetesJobNotStarting
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_job_status_active == 0 and kube_job_status_failed == 0 and kube_job_status_succeeded == 0 and (time() - kube_job_status_start_time) > 600
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Job {{ $labels.namespace }}/{{ $labels.job_name }} did not start for 10 minutes
          summary: Kubernetes Job not starting ({{ $labels.namespace }}/{{ $labels.job_name }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 53402e32-4ade-53d4-b8eb-d7ac843fbdb1
        title: KubernetesCronjobSuspended
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_cronjob_spec_suspend != 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            CronJob {{ $labels.namespace }}/{{ $labels.cronjob }} is suspended
          summary: Kubernetes CronJob suspended ({{ $labels.namespace }}/{{ $labels.cronjob }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 012734c5-e6df-5548-8eaa-093a2c0fe27c
        title: KubernetesPersistentvolumeclaimPending
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_persistentvolumeclaim_status_phase{phase="Pending"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            PersistentVolumeClaim {{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }} is pending
          summary: Kubernetes PersistentVolumeClaim pending ({{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 28b66db6-b6c9-5e8f-b693-ee0e8d3a904c
        title: KubernetesVolumeOutOfDiskSpace
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kubelet_volume_stats_available_bytes / kubelet_volume_stats_capacity_bytes * 100 < 10
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Volume is almost full (< 10% left)
          summary: Kubernetes Volume out of disk space (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: f526a8a6-421f-5f33-8c7e-ddff49f61a7a
        title: KubernetesVolumeFullInFourDays
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: predict_linear(kubelet_volume_stats_available_bytes[6h:5m], 4 * 24 * 3600) < 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Volume under {{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }} is expected to fill up within four days. Currently {{ $value | humanize }}% is available.
          summary: Kubernetes Volume full in four days (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: e86eb76c-778e-5693-a2ea-d60d51ee0ce6
        title: KubernetesPersistentvolumeError
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_persistentvolume_status_phase{phase=~"Failed|Pending", job="kube-state-metrics"} > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Persistent volume {{ $labels.persistentvolume }} is in bad state
          summary: Kubernetes PersistentVolumeClaim pending ({{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: e586e0c7-6721-5884-924e-d499b78b92ce
        title: KubernetesStatefulsetDown
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_statefulset_replicas != kube_statefulset_status_replicas_ready > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1m
        annotations:
          description: |-
            StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} went down
          summary: Kubernetes StatefulSet down ({{ $labels.namespace }}/{{ $labels.statefulset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 305992fe-5390-5346-ac87-ad862242304c
        title: KubernetesHpaScaleInability
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (kube_horizontalpodautoscaler_spec_max_replicas - kube_horizontalpodautoscaler_status_desired_replicas) * on (horizontalpodautoscaler,namespace) (kube_horizontalpodautoscaler_status_condition{condition="ScalingLimited", status="true"} == 1) == 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler }} is unable to scale
          summary: Kubernetes HPA scale inability (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 335496ca-2f91-516c-82cf-ea0a5d1f256c
        title: KubernetesHpaMetricsUnavailability
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_horizontalpodautoscaler_status_condition{status="false", condition="ScalingActive"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler }} is unable to collect metrics
          summary: Kubernetes HPA metrics unavailability (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 890b0bf2-4b2f-54f8-baf8-622ea1aad8e0
        title: KubernetesHpaScaleMaximum
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (kube_horizontalpodautoscaler_status_desired_replicas >= kube_horizontalpodautoscaler_spec_max_replicas) and (kube_horizontalpodautoscaler_spec_max_replicas > 1) and (kube_horizontalpodautoscaler_spec_min_replicas != kube_horizontalpodautoscaler_spec_max_replicas)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler }} has hit maximum number of desired pods
          summary: Kubernetes HPA scale maximum (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d3bfddfb-19a2-5106-8fbf-e229d0e42fdb
        title: KubernetesHpaUnderutilized
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: max(quantile_over_time(0.5, kube_horizontalpodautoscaler_status_desired_replicas[1d]) == kube_horizontalpodautoscaler_spec_min_replicas) by (horizontalpodautoscaler) > 3
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler }} is constantly at minimum replicas for 50% of the time. Potential cost saving here.
          summary: Kubernetes HPA underutilized (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 19f52e20-0e7c-56c8-b0ba-d19e4cb06278
        title: KubernetesPodNotHealthy
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: sum by (namespace, pod) (kube_pod_status_phase{phase=~"Pending|Unknown|Failed"}) > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: |-
            Pod {{ $labels.namespace }}/{{ $labels.pod }} has been in a non-running state for longer than 15 minutes.
          summary: Kubernetes Pod not healthy ({{ $labels.namespace }}/{{ $labels.pod }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 5cda7212-7f26-5431-a246-18b1cc6b78e7
        title: KubernetesPodCrashLooping
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: increase(kube_pod_container_status_restarts_total[1m]) > 3
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Pod {{ $labels.namespace }}/{{ $labels.pod }} is crash looping
          summary: Kubernetes pod crash looping ({{ $labels.namespace }}/{{ $labels.pod }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: f95267ec-35ef-5041-bba5-26effe9995bd
        title: KubernetesReplicasetReplicasMismatch
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_replicaset_spec_replicas != kube_replicaset_status_ready_replicas
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            ReplicaSet {{ $labels.namespace }}/{{ $labels.replicaset }} replicas mismatch
          summary: Kubernetes ReplicasSet mismatch ({{ $labels.namespace }}/{{ $labels.replicaset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 29ff22e8-0108-5f07-a3fe-42d5bcd910b1
        title: KubernetesDeploymentReplicasMismatch
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_deployment_spec_replicas != kube_deployment_status_replicas_available
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            Deployment {{ $labels.namespace }}/{{ $labels.deployment }} replicas mismatch
          summary: Kubernetes Deployment replicas mismatch ({{ $labels.namespace }}/{{ $labels.deployment }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 05bfd11b-035c-5e71-befd-5ccaefb12773
        title: KubernetesStatefulsetReplicasMismatch
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_statefulset_status_replicas_ready != kube_statefulset_status_replicas
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            StatefulSet does not match the expected number of replicas.
          summary: Kubernetes StatefulSet replicas mismatch (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: cb244e35-fc53-5bb5-8b74-cee8a5908c3b
        title: KubernetesDeploymentGenerationMismatch
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_deployment_status_observed_generation != kube_deployment_metadata_generation
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            Deployment {{ $labels.namespace }}/{{ $labels.deployment }} has failed but has not been rolled back.
          summary: Kubernetes Deployment generation mismatch ({{ $labels.namespace }}/{{ $labels.deployment }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: bdd2a588-fe59-5a4c-b960-a01b2941728c
        title: KubernetesStatefulsetGenerationMismatch
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_statefulset_status_observed_generation != kube_statefulset_metadata_generation
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} has failed but has not been rolled back.
          summary: Kubernetes StatefulSet generation mismatch ({{ $labels.namespace }}/{{ $labels.statefulset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 28d10cbc-0808-528f-8d5c-05af843d9b99
        title: KubernetesStatefulsetUpdateNotRolledOut
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: max without (revision) (kube_statefulset_status_current_revision unless kube_statefulset_status_update_revision) * (kube_statefulset_replicas != kube_statefulset_status_replicas_updated)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} update has not been rolled out.
          summary: Kubernetes StatefulSet update not rolled out ({{ $labels.namespace }}/{{ $labels.statefulset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d45e4ace-3e90-52e3-b026-7b5475eed290
        title: KubernetesDaemonsetRolloutStuck
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_daemonset_status_number_ready / kube_daemonset_status_desired_number_scheduled * 100 < 100 or kube_daemonset_status_desired_number_scheduled - kube_daemonset_status_current_number_scheduled > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            Some Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are not scheduled or not ready
          summary: Kubernetes DaemonSet rollout stuck ({{ $labels.namespace }}/{{ $labels.daemonset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: c93606be-4000-5900-871c-0573d9491ee6
        title: KubernetesDaemonsetMisscheduled
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_daemonset_status_number_misscheduled > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1m
        annotations:
          description: |-
            Some Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are running where they are not supposed to run
          summary: Kubernetes DaemonSet misscheduled ({{ $labels.namespace }}/{{ $labels.daemonset }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 81d5c96a-3457-5bbf-a99d-c040b8839d40
        title: KubernetesCronjobTooLong
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_job_status_start_time > 0 and absent(kube_job_status_completion_time) and (time() - kube_job_status_start_time) > 3600
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            CronJob {{ $labels.namespace }}/{{ $labels.cronjob }} is taking more than 1h to complete.
          summary: Kubernetes CronJob too long ({{ $labels.namespace }}/{{ $labels.cronjob }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 2590565e-a370-5f8a-8bd6-6682d85665e9
        title: KubernetesJobSlowCompletion
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: kube_job_spec_completions - kube_job_status_succeeded - kube_job_status_failed > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 12h
        annotations:
          description: |-
            Kubernetes Job {{ $labels.namespace }}/{{ $labels.job_name }} did not complete in time.
          summary: Kubernetes job slow completion ({{ $labels.namespace }}/{{ $labels.job_name }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: ed41f194-d57d-568a-909f-f01cfe96255e
        title: KubernetesApiServerErrors
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: sum(rate(apiserver_request_total{job="apiserver",code=~"(?:5..)"}[1m])) by (instance, job) / sum(rate(apiserver_request_total{job="apiserver"}[1m])) by (instance, job) * 100 > 3
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Kubernetes API server is experiencing high error rate
          summary: Kubernetes API server errors (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d11bf50e-95b0-56d7-bfc8-d8e42ddec90f
        title: KubernetesApiClientErrors
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (sum(rate(rest_client_requests_total{code=~"(4|5).."}[1m])) by (instance, job) / sum(rate(rest_client_requests_total[1m])) by (instance, job)) * 100 > 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Kubernetes API client is experiencing high error rate
          summary: Kubernetes API client errors (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: ea89fb13-a61b-5c49-991e-978fb42828a4
        title: KubernetesClientCertificateExpiresNextWeek
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: apiserver_client_certificate_expiration_seconds_count{job="apiserver"} > 0 and histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job="apiserver"}[5m]))) < 7*24*60*60
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            A client certificate used to authenticate to the apiserver is expiring next week.
          summary: Kubernetes client certificate expires next week (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 83fe95bf-caa1-588c-affb-d261230aa0ca
        title: KubernetesClientCertificateExpiresSoon
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: apiserver_client_certificate_expiration_seconds_count{job="apiserver"} > 0 and histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job="apiserver"}[5m]))) < 24*60*60
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            A client certificate used to authenticate to the apiserver is expiring in less than 24.0 hours.
          summary: Kubernetes client certificate expires soon (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 4427277c-f827-5bfc-9f85-154bd873efb3
        title: KubernetesApiServerLatency
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: histogram_quantile(0.99, sum(rate(apiserver_request_duration_seconds_bucket{verb!~"(?:CONNECT|WATCHLIST|WATCH|PROXY)"} [10m])) WITHOUT (subresource)) > 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Kubernetes API server has a 99th percentile latency of {{ $value }} seconds for {{ $labels.verb }} {{ $labels.resource }}.
          summary: Kubernetes API server latency (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
