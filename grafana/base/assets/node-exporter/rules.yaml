apiVersion: 1
groups:
  - orgId: 1
    name: Rules
    folder: Node Exporter
    interval: 1m
    rules:
      - uid: e433eaec-d551-517e-8e53-57208bc2d97b
        title: HostOutOfMemory
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes < .10)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Node memory is filling up (< 10% left)
          summary: Host out of memory (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: b306794b-3994-58dd-8382-ff434707a60a
        title: HostMemoryUnderMemoryPressure
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_vmstat_pgmajfault[5m]) > 1000)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            The node is under heavy memory pressure. High rate of loading memory pages from disk.
          summary: Host memory under memory pressure (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d79355b5-3d18-53b9-97bd-1d26275b62d0
        title: HostMemoryIsUnderutilized
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: min_over_time(node_memory_MemFree_bytes[1w]) > node_memory_MemTotal_bytes * .8
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Node memory usage is < 20% for 1 week. Consider reducing memory space. (instance {{ $labels.instance }})
          summary: Host Memory is underutilized (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 23127cec-92d7-5b50-9fef-ff5e499a2d3c
        title: HostUnusualNetworkThroughputIn
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((rate(node_network_receive_bytes_total[5m]) / on(instance, device) node_network_speed_bytes) > .80)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Host receive bandwidth is high (>80%).
          summary: Host unusual network throughput in (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: dc8d3319-c471-5298-9841-f8c18fff75bf
        title: HostUnusualNetworkThroughputOut
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((rate(node_network_transmit_bytes_total[5m]) / on(instance, device) node_network_speed_bytes) > .80)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Host transmit bandwidth is high (>80%)
          summary: Host unusual network throughput out (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 620a3d70-219d-5d9d-82fb-3b7aaefe4275
        title: HostUnusualDiskReadRate
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_disk_io_time_seconds_total[5m]) > .80)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Disk is too busy (IO wait > 80%)
          summary: Host unusual disk read rate (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d0852432-0747-5bbe-8beb-7ef42bcc7489
        title: HostOutOfDiskSpace
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_filesystem_avail_bytes{fstype!~"^(fuse.*|tmpfs|cifs|nfs)"} / node_filesystem_size_bytes < .10 and on (instance, device, mountpoint) node_filesystem_readonly == 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Disk is almost full (< 10% left)
          summary: Host out of disk space (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 24b9d6bd-0bfc-51d5-bda4-f57ccd2063d3
        title: HostDiskMayFillIn24Hours
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: predict_linear(node_filesystem_avail_bytes{fstype!~"^(fuse.*|tmpfs|cifs|nfs)"}[3h], 86400) <= 0 and node_filesystem_avail_bytes > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Filesystem will likely run out of space within the next 24 hours.
          summary: Host disk may fill in 24 hours (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: e40df6c1-0194-5970-937e-67da373454c1
        title: HostOutOfInodes
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_filesystem_files_free / node_filesystem_files < .10 and ON (instance, device, mountpoint) node_filesystem_readonly == 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Disk is almost running out of available inodes (< 10% left)
          summary: Host out of inodes (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 955fc5de-7dbb-5e70-b6ac-358b070f5e87
        title: HostFilesystemDeviceError
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: node_filesystem_device_error{fstype!~"^(fuse.*|tmpfs|cifs|nfs)"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Error stat-ing the {{ $labels.mountpoint }} filesystem
          summary: Host filesystem device error (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 65c4e5cf-0459-5cb4-8da6-99abe2c52a3e
        title: HostInodesMayFillIn24Hours
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: predict_linear(node_filesystem_files_free{fstype!~"^(fuse.*|tmpfs|cifs|nfs)"}[1h], 86400) <= 0 and node_filesystem_files_free > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Filesystem will likely run out of inodes within the next 24 hours at current write rate
          summary: Host inodes may fill in 24 hours (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 8fb97d52-726b-5df9-95f7-dfeee2a74a40
        title: HostUnusualDiskReadLatency
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_disk_read_time_seconds_total[1m]) / rate(node_disk_reads_completed_total[1m]) > 0.1 and rate(node_disk_reads_completed_total[1m]) > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Disk latency is growing (read operations > 100ms)
          summary: Host unusual disk read latency (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 36b17ff0-df06-5422-b3ad-de9d673c9498
        title: HostUnusualDiskWriteLatency
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_disk_write_time_seconds_total[1m]) / rate(node_disk_writes_completed_total[1m]) > 0.1 and rate(node_disk_writes_completed_total[1m]) > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Disk latency is growing (write operations > 100ms)
          summary: Host unusual disk write latency (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 45699f0a-429a-59c4-82a2-9a357699aa51
        title: HostHighCpuLoad
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: 1 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m]))) > .80
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            CPU load is > 80%
          summary: Host high CPU load (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 2aa1f7ec-a4d8-5a98-aa86-7e97f4fdd82b
        title: HostCpuIsUnderutilized
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (min by (instance) (rate(node_cpu_seconds_total{mode="idle"}[1h]))) > 0.8
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1w
        annotations:
          description: |-
            CPU load has been < 20% for 1 week. Consider reducing the number of CPUs.
          summary: Host CPU is underutilized (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 54daf247-370c-5e49-94e5-67fc9c500996
        title: HostCpuStealNoisyNeighbor
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: avg by(instance) (rate(node_cpu_seconds_total{mode="steal"}[5m])) * 100 > 10
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            CPU steal is > 10%. A noisy neighbor is killing VM performances or a spot instance may be out of credit.
          summary: Host CPU steal noisy neighbor (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: f078f0c9-011c-5cf3-a534-3f257fb404d4
        title: HostCpuHighIowait
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: avg by (instance) (rate(node_cpu_seconds_total{mode="iowait"}[5m])) > .10
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            CPU iowait > 10%. Your CPU is idling waiting for storage to respond.
          summary: Host CPU high iowait (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: b7e88d3b-997e-508d-bdef-0a39a0a6ab43
        title: HostUnusualDiskIo
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: rate(node_disk_io_time_seconds_total[5m]) > 0.8
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 5m
        annotations:
          description: |-
            Disk usage >80%. Check storage for issues or increase IOPS capabilities. Check storage for issues.
          summary: Host unusual disk IO (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 5be66381-3395-5bc1-8de5-fa9d059fb3ff
        title: HostContextSwitchingHigh
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_context_switches_total[15m])/count without(mode,cpu) (node_cpu_seconds_total{mode="idle"})) / (rate(node_context_switches_total[1d])/count without(mode,cpu) (node_cpu_seconds_total{mode="idle"})) > 2
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Context switching is growing on the node (twice the daily average during the last 15m)
          summary: Host context switching high (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 3b31e3ac-8a44-502e-b2ee-5050ec77044f
        title: HostSwapIsFillingUp
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((1 - (node_memory_SwapFree_bytes / node_memory_SwapTotal_bytes)) * 100 > 80)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Swap is filling up (>80%)
          summary: Host swap is filling up (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 9e136790-96bc-5952-8355-4cbb8cd7317a
        title: HostSystemdServiceCrashed
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_systemd_unit_state{state="failed"} == 1)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            systemd service crashed
          summary: Host systemd service crashed (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: b81f2a2d-7083-5b66-b46b-ea2929d7c290
        title: HostPhysicalComponentTooHot
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: node_hwmon_temp_celsius > node_hwmon_temp_max_celsius
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 5m
        annotations:
          description: |-
            Physical hardware component too hot
          summary: Host physical component too hot (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 15def625-1f09-535b-a944-9b962fd39477
        title: HostNodeOvertemperatureAlarm
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((node_hwmon_temp_crit_alarm_celsius == 1) or (node_hwmon_temp_alarm == 1))
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Physical node temperature alarm triggered
          summary: Host node overtemperature alarm (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: e728f0bf-f834-5f56-aa93-78acaaadd90b
        title: HostSoftwareRaidInsufficientDrives
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((node_md_disks_required - on(device, instance) node_md_disks{state="active"}) > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            MD RAID array {{ $labels.device }} on {{ $labels.instance }} has insufficient drives remaining.
          summary: Host software RAID insufficient drives (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 91172e26-046f-5016-9895-609b9a0c1360
        title: HostSoftwareRaidDiskFailure
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_md_disks{state="failed"} > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            MD RAID array {{ $labels.device }} on {{ $labels.instance }} needs attention.
          summary: Host software RAID disk failure (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: c76703b0-f7f5-51b7-9e75-232f72366efb
        title: HostKernelVersionDeviations
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: changes(node_uname_info[1h]) > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Kernel version for {{ $labels.instance }} has changed.
          summary: Host kernel version deviations (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d01704a3-ffa8-5a71-b96f-d5a3c097edc4
        title: HostOomKillDetected
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (increase(node_vmstat_oom_kill[1m]) > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            OOM kill detected
          summary: Host OOM kill detected (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: dde14822-bd53-5825-a390-f43940a92a22
        title: HostEdacCorrectableErrorsDetected
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (increase(node_edac_correctable_errors_total[1m]) > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Host {{ $labels.instance }} has had {{ printf "%.0f" $value }} correctable memory errors reported by EDAC in the last 5 minutes.
          summary: Host EDAC Correctable Errors detected (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 94a8b878-70d9-51dc-84d1-78e5c42183b3
        title: HostEdacUncorrectableErrorsDetected
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_edac_uncorrectable_errors_total > 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: |-
            Host {{ $labels.instance }} has had {{ printf "%.0f" $value }} uncorrectable memory errors reported by EDAC in the last 5 minutes.
          summary: Host EDAC Uncorrectable Errors detected (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: e54ba6eb-dd55-557f-a2d8-4d9684f87cb2
        title: HostNetworkReceiveErrors
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_network_receive_errs_total[2m]) / rate(node_network_receive_packets_total[2m]) > 0.01)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Host {{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf "%.0f" $value }} receive errors in the last two minutes.
          summary: Host Network Receive Errors (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d7df5afb-c4d8-5872-9a86-52c7b116c1e8
        title: HostNetworkTransmitErrors
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (rate(node_network_transmit_errs_total[2m]) / rate(node_network_transmit_packets_total[2m]) > 0.01)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Host {{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf "%.0f" $value }} transmit errors in the last two minutes.
          summary: Host Network Transmit Errors (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 6c56a3ef-828b-563b-a0e3-b1b2d65a11ff
        title: HostNetworkBondDegraded
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((node_bonding_active - node_bonding_slaves) != 0)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Bond "{{ $labels.device }}" degraded on "{{ $labels.instance }}".
          summary: Host Network Bond Degraded (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: ba3f146f-21ea-5a71-a012-066e4b3c2ec4
        title: HostConntrackLimit
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (node_nf_conntrack_entries / node_nf_conntrack_entries_limit > 0.8)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 5m
        annotations:
          description: |-
            The number of conntrack is approaching limit
          summary: Host conntrack limit (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 6b7d7aa6-a587-5e09-a3ab-e6567213a5f3
        title: HostClockSkew
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: ((node_timex_offset_seconds > 0.05 and deriv(node_timex_offset_seconds[5m]) >= 0) or (node_timex_offset_seconds < -0.05 and deriv(node_timex_offset_seconds[5m]) <= 0))
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: |-
            Clock skew detected. Clock is out of sync. Ensure NTP is configured correctly on this host.
          summary: Host clock skew (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 38507de0-8f5f-548a-aa34-0a4d47a31a55
        title: HostClockNotSynchronising
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: (min_over_time(node_timex_sync_status[1m]) == 0 and node_timex_maxerror_seconds >= 16)
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 2m
        annotations:
          description: |-
            Clock not synchronising. Ensure NTP is configured on this host.
          summary: Host clock not synchronising (instance {{ $labels.instance }})
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
