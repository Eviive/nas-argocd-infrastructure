apiVersion: 1
groups:
  - orgId: 1
    name: Alerting Rules
    folder: Node Exporter
    interval: 1m
    rules:
      - uid: cc469ed2-16f6-5ac0-9fd7-697b5f23de07
        title: NodeFilesystemSpaceFillingUp
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_size_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 40
                and
                  predict_linear(node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""}[6h], 24*60*60) < 0
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available space left and is filling up.
          summary: Filesystem is predicted to run out of space within the next 24 hours.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 3d9ed0de-c7b1-5118-aea8-9566579d70e5
        title: NodeFilesystemSpaceFillingUp
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_size_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 20
                and
                  predict_linear(node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""}[6h], 4*60*60) < 0
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available space left and is filling up fast.
          summary: Filesystem is predicted to run out of space within the next 4 hours.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 0f54c939-7a86-5f37-88ad-7a74c0977418
        title: NodeFilesystemAlmostOutOfSpace
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_size_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 5
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 30m
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available space left.
          summary: Filesystem has less than 5% space left.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 405408dc-8fce-50e8-9b7b-51065851ce41
        title: NodeFilesystemAlmostOutOfSpace
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_avail_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_size_bytes{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 3
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 30m
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available space left.
          summary: Filesystem has less than 3% space left.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 9f5d05a5-e4ec-54e8-baf9-5ca68baf2f49
        title: NodeFilesystemFilesFillingUp
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_files{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 40
                and
                  predict_linear(node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""}[6h], 24*60*60) < 0
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available inodes left and is filling up.
          summary: Filesystem is predicted to run out of inodes within the next 24 hours.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 055aca05-7861-5d0e-ae04-9b841261dc9f
        title: NodeFilesystemFilesFillingUp
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_files{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 20
                and
                  predict_linear(node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""}[6h], 4*60*60) < 0
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available inodes left and is filling up fast.
          summary: Filesystem is predicted to run out of inodes within the next 4 hours.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 71e9d6dc-0d39-5187-8ced-04d27190a64f
        title: NodeFilesystemAlmostOutOfFiles
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_files{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 5
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available inodes left.
          summary: Filesystem has less than 5% inodes left.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: c4278fd0-ad91-50c8-933b-052d8c83e029
        title: NodeFilesystemAlmostOutOfFiles
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filesystem_files_free{job="integrations/node_exporter",fstype!="",mountpoint!=""} / node_filesystem_files{job="integrations/node_exporter",fstype!="",mountpoint!=""} * 100 < 3
                and
                  node_filesystem_readonly{job="integrations/node_exporter",fstype!="",mountpoint!=""} == 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: Filesystem on {{ $labels.device }}, mounted on {{ $labels.mountpoint }}, at {{ $labels.instance }} has only {{ printf "%.2f" $value }}% available inodes left.
          summary: Filesystem has less than 3% inodes left.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 31c80813-689d-55eb-9b0b-fa10cc0e8af0
        title: NodeNetworkReceiveErrs
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                rate(node_network_receive_errs_total{job="integrations/node_exporter"}[2m]) / rate(node_network_receive_packets_total{job="integrations/node_exporter"}[2m]) > 0.01
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: '{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf "%.0f" $value }} receive errors in the last two minutes.'
          summary: Network interface is reporting many receive errors.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 4f09859f-e5c3-50d1-bdca-6a8991790b12
        title: NodeNetworkTransmitErrs
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                rate(node_network_transmit_errs_total{job="integrations/node_exporter"}[2m]) / rate(node_network_transmit_packets_total{job="integrations/node_exporter"}[2m]) > 0.01
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 1h
        annotations:
          description: '{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf "%.0f" $value }} transmit errors in the last two minutes.'
          summary: Network interface is reporting many transmit errors.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: b8097ea5-893a-5b74-8498-a1b31cb24c73
        title: NodeHighNumberConntrackEntriesUsed
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (node_nf_conntrack_entries{job="integrations/node_exporter"} / node_nf_conntrack_entries_limit) > 0.75
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: '{{ $labels.instance }} {{ $value | humanizePercentage }} of conntrack entries are used.'
          summary: Number of conntrack are getting close to the limit.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: cd3f16db-a5c3-5acb-8cde-83e3636e3bf1
        title: NodeTextFileCollectorScrapeError
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                node_textfile_scrape_error{job="integrations/node_exporter"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: Node Exporter text file collector on {{ $labels.instance }} failed to scrape.
          summary: Node Exporter text file collector failed to scrape.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 270ea9f9-f5cd-51ca-a08c-93f8990cd483
        title: NodeClockSkewDetected
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_timex_offset_seconds{job="integrations/node_exporter"} > 0.05
                and
                  deriv(node_timex_offset_seconds{job="integrations/node_exporter"}[5m]) >= 0
                )
                or
                (
                  node_timex_offset_seconds{job="integrations/node_exporter"} < -0.05
                and
                  deriv(node_timex_offset_seconds{job="integrations/node_exporter"}[5m]) <= 0
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: Clock at {{ $labels.instance }} is out of sync by more than 0.05s. Ensure NTP is configured correctly on this host.
          summary: Clock skew detected.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 431a95d3-d33a-5f84-b93b-f259a7123646
        title: NodeClockNotSynchronising
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                min_over_time(node_timex_sync_status{job="integrations/node_exporter"}[5m]) == 0
                and
                node_timex_maxerror_seconds{job="integrations/node_exporter"} >= 16
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 10m
        annotations:
          description: Clock at {{ $labels.instance }} is not synchronising. Ensure NTP is configured on this host.
          summary: Clock not synchronising.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 2d02fee6-6012-5039-a394-331778d7ce67
        title: NodeRAIDDegraded
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                node_md_disks_required{job="integrations/node_exporter",device!=""} - ignoring (state) (node_md_disks{state="active",job="integrations/node_exporter",device!=""}) > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: RAID array '{{ $labels.device }}' at {{ $labels.instance }} is in degraded state due to one or more disks failures. Number of spare drives is insufficient to fix issue automatically.
          summary: RAID Array is degraded.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: a7a21eb2-2238-5654-8eb2-4fd679615471
        title: NodeRAIDDiskFailure
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                node_md_disks{state="failed",job="integrations/node_exporter",device!=""} > 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        annotations:
          description: At least one device in RAID array at {{ $labels.instance }} failed. Array '{{ $labels.device }}' needs attention and possibly a disk swap.
          summary: Failed device in RAID array.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 20c7ba2b-86ba-5cd4-8688-41c14465f1ea
        title: NodeFileDescriptorLimit
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filefd_allocated{job="integrations/node_exporter"} * 100 / node_filefd_maximum{job="integrations/node_exporter"} > 70
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: File descriptors limit at {{ $labels.instance }} is currently at {{ printf "%.2f" $value }}%.
          summary: Kernel is predicted to exhaust file descriptors limit soon.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 14f9cc9c-bdeb-5eae-ad04-7f962a835226
        title: NodeFileDescriptorLimit
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (
                  node_filefd_allocated{job="integrations/node_exporter"} * 100 / node_filefd_maximum{job="integrations/node_exporter"} > 90
                )
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: File descriptors limit at {{ $labels.instance }} is currently at {{ printf "%.2f" $value }}%.
          summary: Kernel is predicted to exhaust file descriptors limit soon.
        labels:
          __converted_prometheus_rule__: "true"
          severity: critical
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 50948ecd-924f-5c45-bf7d-621078e7d85d
        title: NodeCPUHighUsage
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                sum without(mode) (avg without (cpu) (rate(node_cpu_seconds_total{job="integrations/node_exporter", mode!~"idle|iowait"}[2m]))) * 100 > 90
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: |
            CPU usage at {{ $labels.instance }} has been above 90% for the last 15 minutes, is currently at {{ printf "%.2f" $value }}%.
          summary: High CPU usage.
        labels:
          __converted_prometheus_rule__: "true"
          severity: info
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 8c3b1f8b-747c-5385-8f8f-ef6442428c94
        title: NodeSystemSaturation
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                node_load1{job="integrations/node_exporter"}
                / count without (cpu, mode) (node_cpu_seconds_total{job="integrations/node_exporter", mode="idle"}) > 2
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: |
            System load per core at {{ $labels.instance }} has been above 2 for the last 15 minutes, is currently at {{ printf "%.2f" $value }}.
            This might indicate this instance resources saturation and can cause it becoming unresponsive.
          summary: System saturated, load per core is very high.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: af3d8453-6236-51cf-9490-c00686b22ff6
        title: NodeMemoryMajorPagesFaults
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                rate(node_vmstat_pgmajfault{job="integrations/node_exporter"}[5m]) > 500
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: |
            Memory major pages are occurring at very high rate at {{ $labels.instance }}, 500 major page faults per second for the last 15 minutes, is currently at {{ printf "%.2f" $value }}.
            Please check that there is enough memory available at this instance.
          summary: Memory major page faults are occurring at very high rate.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 37f01052-3763-5bf5-853b-fb9f04027899
        title: NodeMemoryHighUtilization
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                100 - (node_memory_MemAvailable_bytes{job="integrations/node_exporter"} / node_memory_MemTotal_bytes{job="integrations/node_exporter"} * 100) > 90
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: |
            Memory is filling up at {{ $labels.instance }}, has been above 90% for the last 15 minutes, is currently at {{ printf "%.2f" $value }}%.
          summary: Host is running out of memory.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 2af28bab-b462-5e1c-856f-5478efb7b1c4
        title: NodeDiskIOSaturation
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                rate(node_disk_io_time_weighted_seconds_total{job="integrations/node_exporter", device!=""}[5m]) > 10
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 30m
        annotations:
          description: |
            Disk IO queue (aqu-sq) is high on {{ $labels.device }} at {{ $labels.instance }}, has been above 10 for the last 30 minutes, is currently at {{ printf "%.2f" $value }}.
            This symptom might indicate disk saturation.
          summary: Disk IO queue is high.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: 2a7c303b-d1f5-51d2-a6c3-2c3e722fe8c4
        title: NodeSystemdServiceFailed
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                node_systemd_unit_state{job="integrations/node_exporter", state="failed"} == 1
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 5m
        annotations:
          description: Systemd service {{ $labels.name }} has entered failed state at {{ $labels.instance }}
          summary: Systemd service has entered failed state.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: ceaea426-8c14-5418-8239-15ab54dc4455
        title: NodeSystemdServiceCrashlooping
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                increase(node_systemd_service_restart_total{job="integrations/node_exporter"}[5m]) > 2
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 15m
        annotations:
          description: Systemd service {{ $labels.name }} has being restarted too many times at {{ $labels.instance }} for the last 15 minutes. Please check if service is crash looping.
          summary: Systemd service keeps restaring, possibly crash looping.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
      - uid: d0fcbf1a-8494-53ad-bfe5-5bd771779f4c
        title: NodeBondingDegraded
        condition: threshold
        data:
          - refId: query
            queryType: prometheus
            relativeTimeRange:
              from: 660
              to: 60
            datasourceUid: mimir
            model:
              datasource:
                type: prometheus
                uid: mimir
              expr: |
                (node_bonding_slaves{job="integrations/node_exporter"} - node_bonding_active{job="integrations/node_exporter"}) != 0
              instant: true
              intervalMs: 1000
              maxDataPoints: 43200
              range: false
              refId: query
          - refId: prometheus_math
            queryType: math
            datasourceUid: __expr__
            model:
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: is_number($query) || is_nan($query) || is_inf($query)
              intervalMs: 1000
              maxDataPoints: 43200
              refId: prometheus_math
              type: math
          - refId: threshold
            queryType: threshold
            datasourceUid: __expr__
            model:
              conditions:
                - evaluator:
                    params:
                      - 0
                    type: gt
              datasource:
                IsPrunable: false
                access: ""
                apiVersion: ""
                basicAuth: false
                basicAuthUser: ""
                created: "0001-01-01T00:00:00Z"
                database: ""
                id: -100
                isDefault: false
                jsonData: {}
                name: __expr__
                readOnly: false
                secureJsonData: {}
                type: __expr__
                uid: __expr__
                updated: "0001-01-01T00:00:00Z"
                url: ""
                user: ""
                withCredentials: false
              expression: prometheus_math
              intervalMs: 1000
              maxDataPoints: 43200
              refId: threshold
              type: threshold
        noDataState: OK
        execErrState: OK
        for: 5m
        annotations:
          description: Bonding interface {{ $labels.master }} on {{ $labels.instance }} is in degraded state due to one or more slave failures.
          summary: Bonding interface is degraded.
        labels:
          __converted_prometheus_rule__: "true"
          severity: warning
        isPaused: false
        missing_series_evals_to_resolve: 1
